{"version":3,"sources":["../src/utils.ts","../src/ProviderIdentityFlag.ts","../src/EvmWallet.ts","../src/EvmDebugWallet.ts","../src/InjectedWallet.ts","../src/ExternalWallet.ts","../src/WalletConnect.ts","../src/MipdWallet.ts","../src/CoinbaseSmartWallet.ts","../src/isWalletMultiSig.ts"],"names":["providers","provider","ProviderIdentityFlag","AbstractWallet","action","makeObservable","runInAction","createEIP1193Provider","computed","observable","flow","getNetwork","waitFor","assert"],"mappings":"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","sourcesContent":["import {type EIP1193Provider, createEIP1193Provider} from '@web3-onboard/common';\nimport {type Signer, providers} from 'ethers';\n\nexport function numberToHex(number: number): string {\n  return '0x' + number.toString(16);\n}\n\nexport function normalizeChainId(chainId: number | string): number {\n  return Number(chainId);\n}\n\nexport function getSigner(provider: EIP1193Provider): Signer {\n  return new providers.Web3Provider(provider, 'any').getSigner();\n}\n\nexport function getEIP1193Provider(\n  identity: string,\n  {patchProvider = true, ignoreFlags}: {ignoreFlags?: string[]; patchProvider?: boolean} = {},\n): EIP1193Provider | undefined {\n  if (typeof window === 'undefined') return undefined;\n  const ethereum = window.ethereum;\n  if (!ethereum) return undefined;\n  const providers: any[] = Array.isArray(ethereum.providers) ? ethereum.providers : [ethereum];\n  const provider = providers\n    .filter((provider) => {\n      if (!ignoreFlags) return true;\n\n      return !ignoreFlags.some((ignoredIdentity) => provider[ignoredIdentity]);\n    })\n    .find((provider) => {\n      return provider[identity];\n    });\n\n  if (!provider) return undefined;\n  // some wallets are EIP1193Provider already or can't be patched (Brave)\n  if (!patchProvider) return provider as EIP1193Provider;\n\n  patchEIP1193Provider(provider);\n  return createEIP1193Provider(provider);\n}\n\nexport {createEIP1193Provider};\n\n// Some wallets do not conform to EIP-1193 (e.g. Trust Wallet)\n// https://github.com/wevm/wagmi/issues/3526#issuecomment-1912683002\nexport function patchEIP1193Provider(provider: EIP1193Provider) {\n  if (provider && !provider.removeListener) {\n    // Try using `off` handler if it exists, otherwise noop\n    if ('off' in provider && typeof provider.off === 'function') {\n      provider.removeListener = provider.off as typeof provider.removeListener;\n    } else {\n      provider.removeListener = () => {};\n    }\n  }\n  return provider;\n}\n","export enum ProviderIdentityFlag {\n  AlphaWallet = 'isAlphaWallet',\n  ApexWallet = 'isApexWallet',\n  AToken = 'isAToken',\n  BifrostWallet = 'isBifrost',\n  Binance = 'bbcSignTx',\n  Bitpie = 'isBitpie',\n  BlockWallet = 'isBlockWallet',\n  Coinbase = 'isToshi',\n  CoinbaseExtension = 'isCoinbaseWallet',\n  Detected = 'request',\n  Dcent = 'isDcentWallet',\n  Exodus = 'isExodus',\n  Frontier = 'isFrontier',\n  Frame = 'isFrame',\n  HuobiWallet = 'isHbWallet',\n  HyperPay = 'isHyperPay',\n  ImToken = 'isImToken',\n  InfinityWallet = 'isInfinityWallet',\n  Liquality = 'isLiquality',\n  MeetOne = 'wallet',\n  MetaMask = 'isMetaMask',\n  MyKey = 'isMYKEY',\n  OwnBit = 'isOwnbit',\n  Status = 'isStatus',\n  Trust = 'isTrust',\n  TokenPocket = 'isTokenPocket',\n  TP = 'isTp',\n  WalletIo = 'isWalletIO',\n  XDEFI = 'isXDEFI',\n  OneInch = 'isOneInchIOSWallet',\n  Tokenary = 'isTokenary',\n  Taho = 'isTally',\n  BraveWallet = 'isBraveWallet',\n  Rabby = 'isRabby',\n  MathWallet = 'isMathWallet',\n  GameStop = 'isGamestop',\n  BitKeep = 'isBitKeep',\n  Sequence = 'isSequence',\n  Core = 'isAvalanche',\n  Opera = 'isOpera',\n  Bitski = 'isBitski',\n  Enkrypt = 'isEnkrypt',\n  Phantom = 'isPhantom',\n  OKXWallet = 'isOkxWallet',\n  Zeal = 'isZeal',\n  Zerion = 'isZerion',\n  Rainbow = 'isRainbow',\n  SafePal = 'isSafePal',\n  DeFiWallet = 'isDeficonnectProvider',\n  Safeheron = 'isSafeheron',\n}\n","import {\n  type Wallet,\n  AbstractWallet,\n  UserRejectedRequestError,\n  SyncWalletError,\n} from '@layerzerolabs/ui-wallet';\nimport {flow, action} from 'mobx';\nimport type {Signer} from 'ethers';\nimport {\n  type ChainKey,\n  getNetwork,\n  waitFor,\n  type Network,\n  tryGetNetworkByNativeChainId,\n  getBlockExplorers,\n  getRpcs,\n  ChainType,\n  assert,\n} from '@layerzerolabs/ui-core';\nimport type {\n  AccountsListener,\n  ChainListener,\n  ConnectListener,\n  DisconnectListener,\n  EIP1193Provider,\n  MessageListener,\n} from '@web3-onboard/common';\nimport {getSigner, normalizeChainId, numberToHex} from './utils';\nimport type {EvmSigner} from './EvmSigner';\nimport {tron} from 'viem/chains';\n\nexport type BaseWallet = Wallet<EvmSigner>;\nexport type EvmWalletConfig = {\n  switchChainTimeout: number;\n};\n\nexport abstract class EvmWallet extends AbstractWallet<EvmSigner> {\n  public chainType: ChainType = ChainType.EVM;\n  public abstract type: string;\n  public abstract autoConnect: () => Promise<void>;\n\n  public provider: EIP1193Provider | undefined = undefined;\n  public accounts: string[] = [];\n  protected config: EvmWalletConfig = this.getConfig();\n  public get chainKey(): ChainKey | undefined {\n    return tryGetNetworkByNativeChainId(this.chainType, this.nativeChainId)?.chainKey;\n  }\n  override signer: Signer | undefined = undefined;\n  protected log = console;\n\n  protected unsubscribe: () => void = noop;\n  protected subscribe(provider: EIP1193Provider) {\n    // make sure there are no previous listeners\n    this.unsubscribe();\n\n    provider.on('accountsChanged', this.handleAccountsChanged);\n    provider.on('chainChanged', this.handleChainChanged);\n    provider.on('connect', this.handleConnect);\n    provider.on('disconnect', this.handleDisconnect);\n    provider.on('message', this.handleMessage);\n    //@ts-ignore\n    provider.on('change', this.handleChange);\n\n    this.unsubscribe = () => {\n      provider.removeListener('accountsChanged', this.handleAccountsChanged);\n      provider.removeListener('chainChanged', this.handleChainChanged);\n      provider.removeListener('connect', this.handleConnect);\n      provider.removeListener('disconnect', this.handleDisconnect);\n      provider.removeListener('message', this.handleMessage);\n      this.unsubscribe = noop;\n    };\n  }\n\n  protected handleChange = action((change: unknown) => {\n    this.log.log('change', this, {change});\n  });\n\n  protected handleAccountsChanged: AccountsListener = action((accounts) => {\n    this.log.log('accountsChanged', this, {accounts});\n\n    const [account] = accounts;\n    if (account) {\n      this.address = account;\n      this.accounts = accounts;\n      this.signer = getSigner(this.provider!);\n    } else {\n      this.address = undefined;\n      this.accounts = accounts;\n      this.nativeChainId = undefined;\n      this.signer = undefined;\n      this.isConnected = false;\n    }\n  });\n\n  protected handleMessage: MessageListener = action((message) => {\n    this.log.log('message', this, {message});\n  });\n\n  protected handleChainChanged: ChainListener = action((chainId) => {\n    this.log.log('chainChanged', this, chainId);\n\n    this.nativeChainId = normalizeChainId(chainId);\n    this.signer = getSigner(this.provider!);\n  });\n\n  protected handleConnect: ConnectListener = action((info) => {\n    if (!this.isConnecting) return;\n    this.log.log('connect', this, info);\n\n    this.nativeChainId = normalizeChainId(info.chainId);\n    if (this.nativeChainId === Number(getNetwork(ChainType.TRON).nativeChainId)) {\n      this.chainType = ChainType.TRON;\n    }\n    this.signer = getSigner(this.provider!);\n  });\n\n  protected handleDisconnect: DisconnectListener = action((error) => {\n    this.log.log('disconnect', this, {error});\n\n    this.nativeChainId = undefined;\n    this.isConnected = false;\n    this.signer = undefined;\n  });\n\n  protected async eth_requestAccounts(): Promise<string[]> {\n    assertProvider(this);\n    const accounts = (await this.provider.request({\n      method: 'eth_requestAccounts',\n      params: [],\n    })) as string[];\n    return accounts;\n  }\n\n  // adding for debugging purposes\n  protected accountsPromise: Promise<string[]> | undefined;\n  protected nativeChainIdPromise: Promise<number> | undefined;\n\n  getAccounts = () => this.eth_requestAccounts();\n\n  connect: BaseWallet['connect'] = flow(\n    function* (this: EvmWallet) {\n      assert(this.isConnected === false);\n      assert(this.isConnecting === false);\n      assertProvider(this);\n      try {\n        this.isConnecting = true;\n        this.accountsPromise = this.getAccounts();\n        this.nativeChainIdPromise = this.getNativeChainId();\n        this.nativeChainId = yield this.nativeChainIdPromise;\n        this.accounts = yield this.accountsPromise;\n        this.address = this.accounts[0];\n        this.signer = getSigner(this.provider);\n        this.isConnecting = false;\n        this.isConnected = true;\n        this.isAutoConnectEnabled = true;\n      } finally {\n        this.isConnecting = false;\n      }\n    }.bind(this),\n  );\n\n  disconnect: BaseWallet['disconnect'] = flow(\n    function* (this: EvmWallet) {\n      this.isConnected = false;\n      this.address = undefined;\n      this.nativeChainId = undefined;\n      this.signer = undefined;\n      this.isAutoConnectEnabled = false;\n    }.bind(this),\n  );\n\n  switchChain: BaseWallet['switchChain'] = flow(\n    function* (this: EvmWallet, chainKey: ChainKey) {\n      let userRejected = false;\n      const network = getNetwork(chainKey);\n      assertProvider(this);\n      assert(this.isSwitchingChain === false);\n      if (this.chainKey === network.chainKey) return;\n      try {\n        this.isSwitchingChain = true;\n        try {\n          yield this.switchEthereumChain(network);\n        } catch (e) {\n          const error = e as {code?: number; message?: string};\n\n          if (error.code === 4001) {\n            userRejected = true;\n            throw new UserRejectedRequestError(error.message ?? 'User rejected the request.', {\n              cause: error,\n            });\n          }\n\n          yield this.addEthereumChain(network);\n        }\n        try {\n          // ensure wallet synchronized chainId\n          yield waitFor(() => this.chainKey === network.chainKey, {\n            timeout: this.config.switchChainTimeout,\n          });\n        } catch {\n          throw new SyncWalletError('Wallet did not sync chainId');\n        }\n        this.isSwitchingChain = false;\n      } finally {\n        this.isSwitchingChain = false;\n        // don't disconnect if user rejected\n        if (!userRejected) {\n          // if switching failed - unknown state - disconnect\n          if (this.chainKey !== network.chainKey) {\n            yield this.disconnect();\n          }\n        }\n      }\n    }.bind(this),\n  );\n\n  async getNativeChainId(): Promise<number> {\n    assertProvider(this);\n    const chainId = await this.provider.request({\n      method: 'eth_chainId',\n      params: [],\n    });\n    return normalizeChainId(chainId as string);\n  }\n\n  async getAddress(): Promise<string> {\n    const accounts = await this.getAccounts();\n    const address = accounts[0];\n    assert(address, 'Address is not set');\n    return address;\n  }\n\n  // extracted and public so it can be overridden with custom RPCs\n  public async getRpcUrls(chainKey: ChainKey): Promise<string[]> {\n    const rpcs = getRpcs(chainKey);\n    return rpcs.map((rpc) => rpc.url).filter((url) => url.startsWith('http'));\n  }\n\n  protected getBlockExplorerUrls(chainKey: ChainKey): string[] {\n    const blockExplorerUrls = getBlockExplorers(chainKey);\n    const urls = blockExplorerUrls.map((b) => b.url);\n    // adding scan explorer as fallback\n    const scanExplorer = `https://layerzeroscan.com/explorer/chain/${chainKey}`;\n    return [...urls, scanExplorer];\n  }\n\n  protected async switchEthereumChain(chain: Network): Promise<unknown> {\n    assertProvider(this);\n    const chainId = normalizeChainId(chain.nativeChainId);\n    return this.provider.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{chainId: numberToHex(chainId)}],\n    });\n  }\n\n  protected async addEthereumChain(chain: Network): Promise<unknown> {\n    assertProvider(this);\n\n    const blockExplorerUrls = this.getBlockExplorerUrls(chain.chainKey);\n    const rpcUrls = await this.getRpcUrls(chain.chainKey);\n    const chainId = normalizeChainId(chain.nativeChainId);\n\n    return this.provider.request({\n      method: 'wallet_addEthereumChain',\n      params: [\n        {\n          chainId: numberToHex(chainId),\n          chainName: chain.name,\n          nativeCurrency: {\n            name: chain.nativeCurrency.name,\n            symbol: chain.nativeCurrency.symbol,\n            decimals: chain.nativeCurrency.decimals,\n          },\n          rpcUrls,\n          //\n          blockExplorerUrls:\n            blockExplorerUrls.length > 0\n              ? blockExplorerUrls\n              : [`https://layerzeroscan.com/explorer/chain/${chain.chainKey}`],\n        },\n      ],\n    });\n  }\n\n  protected getConfig(): EvmWalletConfig {\n    return {\n      switchChainTimeout: 10_000,\n    };\n  }\n}\n\nconst noop = () => {};\n\nfunction assertProvider(wallet: {\n  provider?: EIP1193Provider;\n}): asserts wallet is {provider: EIP1193Provider} {\n  assert(wallet.provider, `Provider is not set`);\n}\n","import {type ChainKey, getNetworkByNativeChainId} from '@layerzerolabs/ui-core';\nimport {AbstractWallet} from '@layerzerolabs/ui-wallet';\nimport type {Signer, Wallet} from 'ethers';\nimport {action, makeObservable, runInAction} from 'mobx';\n\nexport class EvmDebugWallet extends AbstractWallet<Signer> {\n  readonly chainType = 'evm';\n  readonly type = 'debug';\n  chainKey: ChainKey | undefined = undefined;\n  isAvailable = true;\n  isConnected = false;\n  nativeChainId: number | undefined = undefined;\n  address: string | undefined = undefined;\n  readonly signer: Signer;\n  constructor(protected wallet: Wallet) {\n    super();\n    makeObservable(this, {\n      isConnected: true,\n      isAvailable: true,\n      address: true,\n      nativeChainId: true,\n      chainKey: true,\n      connect: action,\n      disconnect: action,\n    });\n    this.signer = wallet;\n  }\n  async connect(): Promise<void> {\n    try {\n      runInAction(() => (this.isConnecting = true));\n      const [nativeChainId, address] = await Promise.all([\n        this.getNativeChainId(),\n        this.getAddress(),\n      ]);\n      runInAction(() => {\n        this.address = address;\n        this.nativeChainId = nativeChainId;\n        this.chainKey = getNetworkByNativeChainId('evm', this.nativeChainId).chainKey;\n\n        this.isConnecting = false;\n        this.isConnected = true;\n      });\n    } catch {\n      runInAction(() => {\n        this.isConnecting = false;\n        this.isConnected = false;\n      });\n    }\n  }\n  async disconnect(): Promise<void> {\n    this.isConnected = false;\n  }\n  async autoConnect(): Promise<void> {\n    this.connect();\n  }\n  async switchChain(chainKey: string): Promise<void> {\n    if (this.chainKey !== chainKey) {\n      throw new Error('Method not implemented.');\n    }\n  }\n  async getNativeChainId(): Promise<number> {\n    return (await this.wallet.provider.getNetwork()).chainId;\n  }\n  async getAddress(): Promise<string> {\n    return this.wallet.getAddress();\n  }\n}\n","import {computed, makeObservable, observable, runInAction} from 'mobx';\nimport {\n  type DisconnectListener,\n  type EIP1193Provider,\n  createEIP1193Provider,\n} from '@web3-onboard/common';\nimport {ProviderIdentityFlag} from './ProviderIdentityFlag';\nimport {EvmWallet} from './EvmWallet';\nimport {getEIP1193Provider} from './utils';\n\nexport const DETECT_INTERVAL = 100;\nexport const DETECT_TIMEOUT = 5000;\n\nexport abstract class InjectedWallet extends EvmWallet {\n  public abstract readonly identityFlag: ProviderIdentityFlag;\n  protected providerPromise: Promise<EIP1193Provider>;\n\n  public autoConnect: () => Promise<void> = async () => {\n    if (!this.isAutoConnectEnabled) return Promise.reject();\n    await this.providerPromise;\n    await this.connect();\n  };\n\n  constructor() {\n    super();\n\n    makeObservable(this, {\n      isAvailable: true,\n      chainKey: computed,\n      isConnected: true,\n      isConnecting: true,\n      isSwitchingChain: true,\n      publicKey: true,\n      nativeChainId: true,\n      address: true,\n      signer: observable.ref,\n      provider: observable.ref,\n    });\n\n    this.providerPromise = this.detectProvider();\n    this.providerPromise.then((provider) =>\n      runInAction(() => {\n        this.isAvailable = true;\n        this.provider = provider;\n        this.subscribe(provider);\n      }),\n    );\n  }\n\n  protected detectProvider(): Promise<EIP1193Provider> {\n    const provider = this.tryGetProvider();\n    if (provider) return Promise.resolve(provider);\n    return new Promise((resolve) => {\n      if (typeof window === 'undefined') return;\n      const id = setInterval(() => {\n        const provider = this.tryGetProvider();\n        if (!provider) return;\n        clearInterval(id);\n        resolve(provider);\n      }, DETECT_INTERVAL);\n      setTimeout(() => clearInterval(id), DETECT_TIMEOUT);\n    });\n  }\n\n  protected tryGetProvider(): EIP1193Provider | undefined {\n    return getEIP1193Provider(this.identityFlag);\n  }\n}\n\nexport class MetaMaskWallet extends InjectedWallet {\n  public type: string = 'MetaMask';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.MetaMask;\n  public readonly url = 'https://metamask.io';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/metamask.svg';\n\n  protected tryGetProvider(): EIP1193Provider | undefined {\n    // Core wallet has isMetaMask === true in its provider, we need to ignore it to properly select MetaMask\n    return getEIP1193Provider(this.identityFlag, {ignoreFlags: [ProviderIdentityFlag.Core]});\n  }\n\n  // MM sometimes fires `disconnect` when calling wallet_switchEthereumChain\n  // https://github.com/MetaMask/metamask-extension/issues/13375\n  protected override handleDisconnect: DisconnectListener = (error) => {\n    if (error.code === 1013) {\n      console.warn(error.message, error);\n      return;\n    }\n    // copying because can't access property by super\n    this.log.log('disconnect', {error});\n\n    this.nativeChainId = undefined;\n    this.isConnected = false;\n    this.signer = undefined;\n  };\n}\n\nexport class CoinbaseWallet extends InjectedWallet {\n  public type: string = 'CoinBase';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.CoinbaseExtension;\n  public readonly url = 'https://www.coinbase.com/wallet';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/coinbase.svg';\n}\n\nexport class CoreWallet extends InjectedWallet {\n  public type: string = 'Core';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.Core;\n  public readonly url = 'https://core.app/';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/core.svg';\n}\n\nexport class TahoWallet extends InjectedWallet {\n  public type: string = 'Taho';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.Taho;\n  public readonly url = 'https://taho.xyz/';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/taho.svg';\n}\n\nexport class DeFiWallet extends InjectedWallet {\n  public type: string = 'Crypto.com DeFi Wallet';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.DeFiWallet;\n  public readonly url = 'https://crypto.com/us/defi-wallet';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/defi-wallet.svg';\n}\n\nexport class BraveWallet extends InjectedWallet {\n  public type: string = 'Brave';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.BraveWallet;\n  public readonly url = 'https://brave.com/wallet/';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/brave.svg';\n  protected tryGetProvider(): EIP1193Provider | undefined {\n    return getEIP1193Provider(this.identityFlag, {patchProvider: false});\n  }\n}\n\nexport class OKXWallet extends InjectedWallet {\n  public type: string = 'OKX';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.OKXWallet;\n  public readonly url = 'https://www.okx.com/web3';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/okx.svg';\n\n  protected tryGetProvider(): EIP1193Provider | undefined {\n    if (typeof window === 'undefined') return undefined;\n    const okxwallet = window.okxwallet;\n    if (okxwallet) return createEIP1193Provider(okxwallet);\n    return undefined;\n  }\n}\n\nexport class PhantomWallet extends InjectedWallet {\n  public type: string = 'Phantom';\n  public identityFlag: ProviderIdentityFlag = ProviderIdentityFlag.Phantom;\n  public readonly url = 'https://phantom.app/';\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/phantom.svg';\n\n  protected tryGetProvider(): EIP1193Provider | undefined {\n    if (typeof window === 'undefined') return undefined;\n    const ethereum = window.phantom?.ethereum;\n    if (ethereum && ethereum[this.identityFlag]) return createEIP1193Provider(ethereum);\n    return undefined;\n  }\n}\n","import type {EIP1193Provider} from '@web3-onboard/common';\nimport {EvmWallet} from './EvmWallet';\nimport {action, computed, makeObservable, observable} from 'mobx';\n\n// To be used with external wallet integrations\n// const externalWallet = new ExternalWallet();\n// externalWallet.setProvider('MetaMask', EIP1193Provider)\nexport class ExternalWallet extends EvmWallet {\n  public type: string = 'external';\n  public autoConnect = () => Promise.reject();\n\n  public get isAutoConnectEnabled() {\n    return false;\n  }\n\n  constructor() {\n    super();\n    makeObservable(this, {\n      isAvailable: true,\n      chainKey: computed,\n      isConnected: true,\n      isConnecting: true,\n      isSwitchingChain: true,\n      publicKey: true,\n      nativeChainId: true,\n      address: true,\n      signer: observable.ref,\n      provider: observable.ref,\n      type: true,\n      setProvider: action,\n      set: action,\n    });\n  }\n\n  // todo:\n  // discuss whether have `setProvider` or `update({type:'MetaMask', provider: Provider, nativeChainId: 1})`\n  set(args: {\n    type?: string;\n    provider?: EIP1193Provider;\n    nativeChainId?: number;\n    address?: string;\n    connected?: boolean;\n    isConnecting?: boolean;\n  }) {\n    Object.assign(this, args);\n    if (args.provider) {\n      this.subscribe(args.provider);\n    } else {\n      this.unsubscribe();\n    }\n  }\n  setProvider(walletType: string, provider: EIP1193Provider) {\n    this.type = walletType;\n    this.provider = provider;\n    //\n    this.isConnected = false;\n    this.isConnecting = false;\n    //\n    this.subscribe(provider);\n    this.connect();\n  }\n}\n","import {computed, makeObservable, flow, runInAction} from 'mobx';\nimport {EthereumProviderOptions} from '@walletconnect/ethereum-provider';\nimport type EthereumProviderType from '@walletconnect/ethereum-provider';\nimport {getNetwork, waitFor, type ChainKey, assert} from '@layerzerolabs/ui-core';\nimport {providers} from 'ethers';\n\nimport {EvmWallet, type BaseWallet} from './EvmWallet';\n\nexport type WalletConnectOptions = EthereumProviderOptions;\n\n// Required chain should be removed in future\n// this flow exists only to support some mobile wallets\nconst REQUIRED_CHAIN_STORAGE_KEY = 'wallet:evm:WalletConnect:chainKey';\n\nexport class WalletConnect extends EvmWallet {\n  public readonly type = 'WalletConnect';\n  public readonly isAvailable: boolean = true;\n  public readonly icon = 'https://icons-ckg.pages.dev/lz-light/wallets/walletconnect.svg';\n  protected providerPromise: Promise<EthereumProviderType> | undefined;\n\n  connect = flow(\n    function* (this: WalletConnect, chainKey?: string) {\n      assert(this.isConnected === false);\n      assert(this.isConnecting === false);\n      try {\n        this.isConnecting = true;\n\n        const provider: EthereumProviderType = yield this.getProvider(chainKey);\n\n        this.provider = provider;\n        yield provider.connect();\n        this.isConnected = true;\n        this.isAutoConnectEnabled = true;\n      } catch (e) {\n        this.provider = undefined;\n        this.providerPromise = undefined;\n        this.requiredChainKey = undefined;\n        throw e;\n      } finally {\n        this.isConnecting = false;\n      }\n    }.bind(this),\n  );\n\n  disconnect = async () => {\n    assert(this.provider);\n    await this.provider.disconnect?.();\n    runInAction(() => {\n      this.isConnected = false;\n      this.address = undefined;\n      this.nativeChainId = undefined;\n      this.isAutoConnectEnabled = false;\n      this.requiredChainKey = undefined;\n      this.providerPromise = undefined;\n      this.provider = undefined;\n    });\n  };\n\n  switchChain: BaseWallet['switchChain'] = flow(\n    function* (this: WalletConnect, chainKey: ChainKey) {\n      assert(this.provider);\n      this.isSwitchingChain = true;\n      try {\n        const network = getNetwork(chainKey);\n        yield this.switchEthereumChain(network);\n        try {\n          // ensure wallet synchronized chainId\n          yield waitFor(() => this.chainKey === chainKey, {timeout: 3000});\n        } catch {\n          throw new Error('Wallet did not sync chainKey');\n        }\n      } finally {\n        this.isSwitchingChain = false;\n      }\n    }.bind(this),\n  );\n\n  autoConnect = async () => {\n    if (!this.isAutoConnectEnabled) return Promise.reject();\n    const provider = await this.getProvider(this.requiredChainKey);\n\n    // wallet connect comes with already connected provider\n    // so connect event will not be emitted\n    // we have to update the state manually\n    runInAction(() => {\n      const address = provider.accounts.at(0);\n      this.isConnected = provider.connected && Boolean(address);\n      this.isConnecting = provider.connecting;\n      this.address = address;\n      this.nativeChainId = provider.chainId;\n      this.provider = provider;\n      this.signer = new providers.Web3Provider(provider).getSigner();\n    });\n  };\n\n  // todo: remove when WC fully supports only optional chains\n  protected get requiredChainKey(): string | undefined {\n    if (typeof localStorage === 'undefined') return undefined;\n    return localStorage.getItem(REQUIRED_CHAIN_STORAGE_KEY) ?? undefined;\n  }\n\n  protected set requiredChainKey(value: string | undefined) {\n    if (typeof localStorage === 'undefined') return;\n    if (value) {\n      localStorage.setItem(REQUIRED_CHAIN_STORAGE_KEY, value);\n    } else {\n      localStorage.removeItem(REQUIRED_CHAIN_STORAGE_KEY);\n    }\n  }\n\n  protected async getProvider(requiredChainKey?: string): Promise<EthereumProviderType> {\n    if (!this.providerPromise) {\n      // create a copy so we don't override original values\n      const options = {...this.options};\n\n      // override required chains only if no chains provided\n      if (requiredChainKey) {\n        const nativeChainId = getNetwork(requiredChainKey).nativeChainId;\n        const chains = new Set(options.chains).add(Number(nativeChainId));\n        options.chains = Array.from(chains);\n        delete options.optionalChains;\n      }\n\n      this.providerPromise = new Promise(async (resolve) => {\n        const {default: Provider} = await import('@walletconnect/ethereum-provider');\n\n        const provider: EthereumProviderType = await Provider.init({\n          methods: [\n            'eth_sendTransaction',\n            'eth_signTransaction',\n            'personal_sign',\n            'eth_sign',\n            'eth_signTypedData',\n            'eth_signTypedData_v4',\n            'wallet_switchEthereumChain',\n            'wallet_addEthereumChain',\n          ],\n          events: [\n            'chainChanged',\n            'accountsChanged',\n            'connected',\n            'session_update',\n            'message',\n            'disconnect',\n            'session_event',\n          ],\n          ...options,\n        });\n\n        // save required chain to local storage after successful connection\n        this.requiredChainKey = requiredChainKey;\n\n        // calling it here so we ensure the handlers are registered only once\n        this.subscribe(provider);\n\n        resolve(provider);\n      });\n    }\n    return this.providerPromise;\n  }\n\n  constructor(public readonly options: WalletConnectOptions) {\n    super();\n\n    makeObservable(this, {\n      isAvailable: true,\n      isConnected: true,\n      isConnecting: true,\n      isSwitchingChain: true,\n      chainKey: computed,\n      publicKey: true,\n      nativeChainId: true,\n      address: true,\n      signer: true,\n      provider: true,\n    });\n  }\n}\n","import type {Store as Mipd} from 'mipd';\nimport {EvmWallet} from './EvmWallet';\nimport {makeObservable, computed, observable, runInAction} from 'mobx';\nimport type {DisconnectListener} from '@web3-onboard/common';\nimport {patchEIP1193Provider} from './utils';\n\nconst isBrowser = typeof window !== 'undefined';\n\n// EIP-6963: Multi Injected Provider Discovery\nexport class MipdWallet extends EvmWallet {\n  public accounts = [];\n\n  public autoConnect: () => Promise<void> = async () => {\n    if (!this.isAutoConnectEnabled) return Promise.reject();\n    await this.connect();\n  };\n  constructor(\n    public info: {\n      name: string;\n      icon: string;\n      url?: string;\n    },\n    protected mipd: Mipd,\n  ) {\n    super();\n\n    makeObservable(this, {\n      type: computed,\n      info: observable.ref,\n      icon: computed,\n      url: computed,\n      isAvailable: true,\n      chainKey: computed,\n      isConnected: true,\n      isConnecting: true,\n      isSwitchingChain: true,\n      publicKey: true,\n      nativeChainId: true,\n      address: true,\n      signer: observable.ref,\n      provider: observable.ref,\n    });\n\n    if (isBrowser) {\n      this.register();\n    }\n  }\n\n  // simplistic approach\n  protected register() {\n    this.mipd.subscribe(\n      (_, meta) => {\n        runInAction(() => {\n          const providerDetails = meta?.added?.find((p) => p.info.name === this.info.name);\n          if (!providerDetails) return;\n          const {provider, info} = providerDetails;\n          //\n          patchEIP1193Provider(provider);\n          this.isAvailable = true;\n          this.info = info;\n          this.provider = provider;\n          this.subscribe(this.provider);\n        });\n      },\n      {emitImmediately: true},\n    );\n  }\n\n  get url() {\n    return this.info.url;\n  }\n\n  get type() {\n    return this.info.name;\n  }\n\n  get icon() {\n    return this.info.icon;\n  }\n\n  // MM sometimes fires `disconnect` when calling wallet_switchEthereumChain\n  // https://github.com/MetaMask/metamask-extension/issues/13375\n  protected override handleDisconnect: DisconnectListener = (error) => {\n    if (error.code === 1013) {\n      console.warn(error.message, error);\n      return;\n    }\n    // copying because can't access property by super\n    this.log.log('disconnect', {error});\n\n    this.nativeChainId = undefined;\n    this.isConnected = false;\n    this.signer = undefined;\n  };\n}\n","import {computed, makeObservable, observable} from 'mobx';\nimport {EvmWallet} from './EvmWallet';\nimport type {EIP1193Provider} from '@web3-onboard/common';\nimport {getNetwork} from '@layerzerolabs/ui-core';\n\n// todo: refactor so we support lazy loading of provider\nexport class CoinbaseSmartWallet extends EvmWallet {\n  public readonly icon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTYiIGhlaWdodD0iNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI4IDU2YzE1LjQ2NCAwIDI4LTEyLjUzNiAyOC0yOFM0My40NjQgMCAyOCAwIDAgMTIuNTM2IDAgMjhzMTIuNTM2IDI4IDI4IDI4WiIgZmlsbD0iIzFCNTNFNCIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNyAyOGMwIDExLjU5OCA5LjQwMiAyMSAyMSAyMXMyMS05LjQwMiAyMS0yMVMzOS41OTggNyAyOCA3IDcgMTYuNDAyIDcgMjhabTE3LjIzNC02Ljc2NmEzIDMgMCAwIDAtMyAzdjcuNTMzYTMgMyAwIDAgMCAzIDNoNy41MzNhMyAzIDAgMCAwIDMtM3YtNy41MzNhMyAzIDAgMCAwLTMtM2gtNy41MzNaIiBmaWxsPSIjZmZmIi8+PC9zdmc+';\n  public readonly type = 'Coinbase Smart Wallet';\n  public readonly isAvailable: boolean = true;\n\n  constructor(public readonly provider: EIP1193Provider) {\n    super();\n\n    makeObservable(this, {\n      isAvailable: true,\n      chainKey: computed,\n      isConnected: true,\n      isConnecting: true,\n      isSwitchingChain: true,\n      publicKey: true,\n      nativeChainId: true,\n      address: true,\n      signer: observable.ref,\n      connect: true,\n    });\n    this.subscribe(provider);\n  }\n\n  async supportsChain(chainKey: string) {\n    const chain = getNetwork(chainKey);\n    const response = await wallet_getCapabilities(this.provider);\n\n    for (const [hexChainKey] of Object.entries(response)) {\n      if (Number(hexChainKey) === chain.nativeChainId) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  autoConnect = async () => {\n    if (!this.isAutoConnectEnabled) return Promise.reject();\n    await this.connect();\n  };\n}\n\nasync function wallet_getCapabilities(provider: EIP1193Provider) {\n  const response = await provider.request({\n    method: 'wallet_getCapabilities',\n  });\n  return response as EIP5792Response.wallet_getCapabilities;\n}\n\ntype CapabilityType = 'sessionKeys' | 'paymasterService';\n\nnamespace EIP5792Response {\n  export interface wallet_getCapabilities {\n    [hexChainKey: string]:\n      | {\n          [capability in CapabilityType]?: boolean;\n        }\n      | undefined;\n  }\n}\n","import {Web3Provider} from '@ethersproject/providers';\n\nexport const isWalletMultiSig = async (\n  provider: Web3Provider,\n  address: string,\n): Promise<boolean> => {\n  const code = await provider.getCode(address);\n  return code !== '0x';\n};\n"]}